/* global.css
   Posicionamento absoluto para garantir: #mobile-menu-btn embaixo (canto inferior direito)
   e demais .mobile-nav-btn aparecendo acima dele.
*/

:root{
  --mobile-nav-size: 60px;
  --mobile-nav-gap: 12px;
  --mobile-nav-bottom: 20px;
  --mobile-nav-right: 20px;
  --mobile-nav-z: 1200;
}

/* Não mostrar em desktop */
@media (min-width: 769px) {
  .mobile-nav-buttons { display: none !important; }
}

/* MOBILE: posicionamento absoluto */
@media (max-width: 768px) {
  .mobile-nav-buttons {
    position: fixed;
    bottom: var(--mobile-nav-bottom);
    right: var(--mobile-nav-right);
    /* largura = tamanho do botão para alinhar corretamente os filhos absolutos */
    width: var(--mobile-nav-size);
    height: auto;
    z-index: var(--mobile-nav-z);
    pointer-events: none; /* controlado por cada botão individualmente */
  }

  /* estilo visual dos botões (suas especificações) */
  .mobile-nav-buttons .mobile-nav-btn {
    position: absolute;
    bottom: 0;         /* todos começam apoiados na mesma base (menu) */
    right: 0;
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: linear-gradient(145deg, #2a1616, #1a0f0f);
    border: 4px solid rgba(92, 34, 34, 0.95);
    box-shadow: 0 8px 24px rgba(0,0,0,0.7), inset 0 2px 8px rgba(255,255,255,0.05);
    color: #efe6e2;
    font-size: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: transform 300ms cubic-bezier(0.4,0,0.2,1), opacity 220ms ease, visibility 220ms;
    position: absolute;
    overflow: hidden;
    box-sizing: border-box;
    padding: 0;
    outline: none;
    -webkit-user-select: none;
    user-select: none;
    will-change: transform, opacity;
    pointer-events: none;  /* inativo até o JS colocá-lo ativo */
    opacity: 0;
    visibility: hidden;
    transform: translateY(0) scale(.98);
  }

  /* O botão menu deve estar visível e com pointer-events ativos */
  #mobile-menu-btn {
    pointer-events: auto;
    opacity: 1;
    visibility: visible;
    transform: translateY(0) scale(1);
    z-index: calc(var(--mobile-nav-z) + 40); /* ficar abaixo dos botões expandidos, mas sempre sobre conteúdo da página */
  }

  /* Quando o container estiver aberto, os botões serão posicionados pelo JS.
     Este seletor apenas garante que, se houver classes aplicadas, a transição ocorra. */
  .mobile-nav-buttons.open .mobile-nav-btn:not(#mobile-menu-btn) {
    /* o JS irá aplicar transform e pointer-events/opacity/visibility dinamicamente */
  }

  /* centralização dos ícones (garante que fique perfeito) */
  .mobile-nav-buttons .mobile-nav-btn i,
  .mobile-nav-buttons .mobile-nav-btn svg,
  .mobile-nav-buttons .mobile-nav-btn img {
    display: block;
    width: auto;
    height: auto;
    line-height: 1;
    vertical-align: middle;
    margin: 0;
    padding: 0;
    pointer-events: none;
  }

  /* tamanho default do ícone */
  .mobile-nav-buttons .mobile-nav-btn i { font-size: 24px; }

  /* botão textual (logout etc) herda estilo e será tratado pelo JS */
  .mobile-nav-buttons .mobile-signout {
    /* deixa igual visualmente aos outros, mas será posicionado pelo JS */
    padding: 6px 10px;
    border-radius: 10px;
    background: linear-gradient(145deg, #2a1616, #1a0f0f);
    border: 4px solid rgba(92,34,34,0.95);
    color: #efe6e2;
    box-shadow: 0 8px 24px rgba(0,0,0,0.7), inset 0 2px 8px rgba(255,255,255,0.05);
    pointer-events: none;
    opacity: 0;
    visibility: hidden;
    transform: translateY(0) scale(.98);
    transition: transform 300ms cubic-bezier(0.4,0,0.2,1), opacity 220ms;
  }
}
/* ========= ALERT MODAL GLOBAL ========= */
.alert-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.65);
  backdrop-filter: blur(3px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10000;
  opacity: 0;
  transition: opacity 0.3s ease;
}

.alert-backdrop.visible {
  opacity: 1;
}

.alert-modal {
  width: 360px;
  max-width: calc(100% - 32px);
  background: linear-gradient(180deg, #1a1414, #2a1c1c);
  border: 4px solid rgba(92, 34, 34, 0.95);
  border-radius: 14px;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.75);
  color: #efe6e2;
  animation: alertPop 0.35s cubic-bezier(0.4, 0, 0.2, 1);
}

.alert-header {
  font-weight: 900;
  padding: 12px 16px;
  border-bottom: 2px solid rgba(90, 22, 22, 0.6);
  text-align: center;
  letter-spacing: 1px;
}

.alert-body {
  padding: 16px;
  text-align: center;
  line-height: 1.4;
  font-size: 1rem;
}

.alert-actions {
  padding: 12px;
  display: flex;
  justify-content: center;
}

.alert-btn {
  padding: 8px 22px;
  border-radius: 10px;
  border: none;
  background: linear-gradient(145deg, #5c2222, #3d1616);
  color: #efe6e2;
  font-family: inherit;
  font-weight: 700;
  cursor: pointer;
  box-shadow: 0 6px 18px rgba(92, 34, 34, 0.5);
  transition: transform 0.15s ease, box-shadow 0.15s ease;
}

.alert-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 10px 26px rgba(92, 34, 34, 0.7);
}

.alert-btn:active {
  transform: scale(0.95);
}

/* animação */
@keyframes alertPop {
  from {
    transform: scale(0.85) translateY(10px);
    opacity: 0;
  }
  to {
    transform: scale(1) translateY(0);
    opacity: 1;
  }
}

/* ========= GLOBAL SCROLLBAR / OVERFLOW STYLE ========= */
* {
  scrollbar-width: thin;
  scrollbar-color: rgba(90, 22, 22, 0.6) rgba(0, 0, 0, 0.25);
}

/* Chrome / Edge / Safari */
*::-webkit-scrollbar {
  width: 10px;
  height: 10px;
}

*::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.25);
  border-radius: 10px;
}

*::-webkit-scrollbar-thumb {
  background: rgba(90, 22, 22, 0.6);
  border-radius: 10px;
  border: 2px solid rgba(0, 0, 0, 0.3);
}

*::-webkit-scrollbar-thumb:hover {
  background: rgba(120, 40, 40, 0.75);
}

/* === Remover "seleções azuis" / tap highlight apenas no mobile === */
@media (max-width: 768px) {
  /* aplicamos às principais coisas interativas — links, botões e seus ícones */
  a,
  button,
  input[type="button"],
  input[type="submit"],
  .mobile-nav-btn,
  .mobile-nav-buttons,
  .mobile-signout,
  .slot,
  .slot * {
    -webkit-tap-highlight-color: transparent; /* Safari / iOS */
    tap-highlight-color: transparent;         /* Chrome Android (nova sintaxe) */
    -webkit-touch-callout: none;              /* evita menu de callout no iOS (segurar) */
    -webkit-user-select: none;                /* evita seleção acidental em toques */
    user-select: none;
    outline: none;                            /* remove outline de foco em toque (mobile) */
    box-shadow: none;
  }

  /* evita a "mancha" de seleção de texto quando algo é selecionado */
  ::selection {
    background: transparent;
    color: inherit;
  }

  /* remove qualquer destaque por :active que alguns navegadores aplicam */
  a:active,
  button:active,
  .mobile-nav-btn:active {
    background-image: none;
    -webkit-tap-highlight-color: transparent;
  }
}

/* ===========================
   Modal entry/exit animations
   Applied to .alert-modal, .modal, .custom-alert-panel and elements with role="dialog"
   =========================== */

/* Keyframes */
@keyframes modalPopIn {
  from { transform: translateY(12px) scale(.96); opacity: 0; }
  to   { transform: translateY(0)    scale(1);   opacity: 1; }
}
@keyframes modalPopOut {
  from { transform: translateY(0)    scale(1);   opacity: 1; }
  to   { transform: translateY(8px)  scale(.98); opacity: 0; }
}
@keyframes backdropFadeIn {
  from { opacity: 0; }
  to   { opacity: 1; }
}
@keyframes backdropFadeOut {
  from { opacity: 1; }
  to   { opacity: 0; }
}

/* Base: aplica em quaisquer backdrops / modals existentes */
.modal-backdrop,
.alert-backdrop {
  will-change: opacity;
  animation-fill-mode: both;
}

.alert-modal,
.modal,
.custom-alert-panel,
[role="dialog"],
[role="alertdialog"] {
  transform-origin: center;
  will-change: transform, opacity;
  /* garante que a animação não altere layout inesperadamente */
}

/* Enter */
.modal-backdrop.backdrop-enter,
.alert-backdrop.backdrop-enter {
  animation: backdropFadeIn .32s cubic-bezier(.2,.9,.2,1) forwards;
}

.alert-modal.modal-enter,
.modal.modal-enter,
.custom-alert-panel.modal-enter,
[role="dialog"].modal-enter,
[role="alertdialog"].modal-enter {
  animation: modalPopIn .36s cubic-bezier(0.2, 0.9, 0.2, 1) forwards;
}

/* Exit */
.modal-backdrop.backdrop-exit,
.alert-backdrop.backdrop-exit {
  animation: backdropFadeOut .22s ease forwards;
}

.alert-modal.modal-exit,
.modal.modal-exit,
.custom-alert-panel.modal-exit,
[role="dialog"].modal-exit,
[role="alertdialog"].modal-exit {
  animation: modalPopOut .22s ease forwards;
}

/* Compatibilidade: mantém .visible como fallback (se já usada) */
.alert-backdrop.visible {
  opacity: 1;
}

/* Prefers-reduced-motion: desativa animações */
@media (prefers-reduced-motion: reduce) {
  .modal-backdrop.backdrop-enter,
  .modal-backdrop.backdrop-exit,
  .alert-modal.modal-enter,
  .alert-modal.modal-exit,
  .modal.modal-enter,
  .modal.modal-exit,
  .custom-alert-panel.modal-enter,
  .custom-alert-panel.modal-exit,
  [role="dialog"].modal-enter,
  [role="dialog"].modal-exit,
  [role="alertdialog"].modal-enter,
  [role="alertdialog"].modal-exit {
    animation: none !important;
    opacity: 1 !important;
    transform: none !important;
  }
}
